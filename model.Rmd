---
title: "model"
author: "Michael Goldschlager"
date: "2/21/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Set Up

### Packages

```{r}
library(tidyverse) #dplyr functions mainly
library(DBI) #database
library(RSQLite) #database
library(tictoc) #timing code execution

library(xgboost) # Load XGBoost
library(caret) # Load Caret
library(OptimalCutpoints) # Load optimal cutpoints
library(ggplot2) # Load ggplot2
library(xgboostExplainer) # Load XGboost Explainer
library(pROC) # Load proc
library(SHAPforxgboost) # Load shap for XGBoost
```

### Set Working Directory

```{r}
wd <- dirname(sys.frame(1)$ofile) #gets the directory where this script is located
setwd(wd) #sets the working directory to the directory of this script, this is so relative paths can be used below
```

### Connect to Database

```{r}
connection <- DBI::dbConnect(RSQLite::SQLite(), "./data/pbp_db") #create connection for db
```

### Get nfl_data_set table from the database
```{r}
nfl_data_set <- dplyr::tbl(connection, "nfl_data_set") #get the nfl_data_set table from the db
```

# Data Preparation

### Select rows and columns from nfl_data_set we want for the model

```{r}

```

### Split data into training and testing

```{r}

```

### Convert data to DMatrix

```{r}

```

# XGBoost Model

### Train Model

```{r}

```

### Variable Importance

```{r}

```

